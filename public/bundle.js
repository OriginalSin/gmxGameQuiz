var app=function(){"use strict";function t(){}function e(t,e){for(var s in e)t[s]=e[s];return t}function s(t,e){for(var s in e)t[s]=1;return t}function i(t){t()}function n(t,e){t.appendChild(e)}function o(t,e,s){t.insertBefore(e,s)}function r(t){t.parentNode.removeChild(t)}function a(t,e){for(var s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function l(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function u(t,e,s){t.addEventListener(e,s,!1)}function h(t,e,s){t.removeEventListener(e,s,!1)}function p(t,e,s){t.setAttribute(e,s)}function m(t,e){t.data=""+e}function d(){return Object.create(null)}function f(t){t._lock=!0,v(t._beforecreate),v(t._oncreate),v(t._aftercreate),t._lock=!1}function g(t,e){t._handlers=d(),t._slots=d(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function v(t){for(;t&&t.length;)t.shift()()}var y={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var s=t in this._handlers&&this._handlers[t].slice();if(s)for(var i=0;i<s.length;i+=1){var n=s[i];if(!n.__calling)try{n.__calling=!0,n.call(this,e)}finally{n.__calling=!1}}},on:function(t,e){var s=this._handlers[t]||(this._handlers[t]=[]);return s.push(e),{cancel:function(){var t=s.indexOf(e);~t&&s.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||f(this.root)},_recompute:t,_set:function(t){var s=this._state,i={},n=!1;for(var o in t=e(this._staged,t),this._staged={},t)this._differs(t[o],s[o])&&(i[o]=n=!0);n&&(this._state=e(e({},s),t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:s}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:s})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};window.serverBase;var _={styleHook(t){let{question:e}=this.get();return e&&this.polyline&&t.id===e.id?{}:null},getSections(t,e){let s=e.getTileAttributeIndexes(),i=e.getGmxProperties().MetaProperties,n=(i.count&&Number(i.count.Value),null);s.section&&(n={},t.forEach(function(t){let e=t.properties[s.section];n[e]=!0})),this.allData=t,this.set({sectionsList:n})},reBuildQuestions(t){let{layerGame:e}=this.get(),s=e.getGmxProperties().MetaProperties,i=s.count?Number(s.count.Value):10,n=e.getTileAttributeIndexes(),o=[];this.allData.forEach(function(e){let s=e.properties[n.section];t[s]&&o.push(e)}),o=o.sort(Math.random).slice(0,i),this.set({questions:o})},setLayerGame(t){let e=this.gmxMap.layersByID[t]||this.gmxMap.layers[Math.floor(this.gmxMap.layers.length*Math.random())];if(e){let t=e.getDataManager(),s=e.getGmxProperties().name,i=t.addObserver({type:"resend",layerID:s,callback:function(t){t.count&&(this.getSections(t.added,e),i.deactivate())}.bind(this)});e.setStyleHook(this.styleHook.bind(this)),this.map.addLayer(e);let n=localStorage.getItem("_gameQuiz_"),o=n?JSON.parse(n):{};this.set({layerGame:e,score:o})}},showQuestionResult(t){this.polyline&&this.map.removeLayer(this.polyline);let{question:e}=this.get(),s=e.dataOption.bounds.toLatLngBounds(!0),i=s.getCenter(),n=s.contains(this._latlng),o=L.polyline([i,this._latlng],{color:"red"}).addTo(this.map);this.map.fitBounds(o.getBounds());let r=o.toGeoJSON().geometry;this.polyline=o,this.setPopupContent(r,n),console.log("showQuestionResult",this.song)},nextQuestion(){this.map.closePopup(),this.map.removeLayer(this.polyline),this.polyline=null,this.root.nextQuestion(this.sc)},setPopupContent(t,e){let{question:s}=this.get(),i=L.DomUtil.create("div",""),n=L.DomUtil.create("div","",i),o=L.DomUtil.create("button","",i);if(t){let i=L.gmxUtil.geoJSONGetLength(t),r=L.gmxUtil.getGeoJSONSummary(t),a={},l=0;e?(l=10,n.innerHTML="Отлично вам начислено: <b>"+l+"</b> баллов",a.ok=l+" баллов",this.audioStarted&&this.audio.stop(0),this.audioStart(11.74689342403628,3.82984126984127)):(n.innerHTML="Растояние от центра объекта:<br><b>"+r+"</b>",this.audioStart(8.50453514739229,.20950113378684806)),a.question=s,a.len=i,a.strLen=r,this.set({resultQuestion:a}),this.sc=l,o.innerHTML="Следующий вопрос",L.DomEvent.on(o,"click",this.nextQuestion,this)}else n.innerHTML="Я считаю что это здесь!",o.innerHTML="Показать",L.DomEvent.on(o,"click",this.showQuestionResult,this);this.popup.setContent(i),this.popupContent=i},clickMap(t){this.map.closePopup(),this._latlng=t.latlng,this.popup=L.popup().setLatLng(this._latlng),this.setPopupContent(),this.map.openPopup(this.popup)},audioStart(t,e){if(this.sound){let s=new(window.AudioContext||window.webkitAudioContext),i=s.createBufferSource(),n=new XMLHttpRequest;n.open("GET","mp3/audio.mp3",!0),n.responseType="arraybuffer",n.onload=function(){s.decodeAudioData(n.response,function(n){i.buffer=n,i.start(s.currentTime+1,t,e),i.connect(s.destination)},function(t){console.log("Error with decoding audio data"+t.err)})},n.send()}},createMap(t){let e=t.state||{},s=t.mapID||"A557835E1B2344479C092FBB0158B529",i=t.layerID||"",n=(t.apiKey,e.map?e.map.position:{});this.sound=t.sound;var o=1==t.base?L.tileLayer("//tilessputnik.ru/{z}/{x}/{y}.png",{attribution:'<a href="http://maps.sputnik.ru">Спутник</a> © Ростелеком | © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxNativeZoom:18,maxZoom:21}):L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia29zbW9zbmlta2kiLCJhIjoiY2lvbW1tNXN0MDAwdnc4bHg5ZWw2YXJtYSJ9.ON9Ovi3fuHc5RAipmLb2EQ",{attribution:'&copy; <a href="//mapbox.com/">mapbox</a>',maxNativeZoom:18,maxZoom:21});let r=new L.Map("map",{attribution:'&copy; <a href="//scanex.ru/">scanex</a>',allWorld:!0,generalized:!1,layers:[o],center:new L.LatLng(n.y||26,n.x||83),zoom:n.z||7}).on("click",this.clickMap.bind(this),this);r.zoomControl.setPosition("bottomright");let a=[];L.gmx.loadMap(s,{leafletMap:r}).then(function(t){t.layers.forEach(function(t){r.removeLayer(t);let e=t.getGmxProperties(),s=e.MetaProperties,i={};for(let t in s){let e=s[t].Value;i[t]=e>0?Number(e):e}a.push({gmxLayer:t,metaHash:i,title:e.title,layerID:e.name}),t._gameZoom=i.zoom||3}),this.quizList=a,this.gmxMap=t,i?this.setLayerGame(i):this.set({quizList:this.quizList})}.bind(this)),this.map=r}};function q({changed:t,current:e,previous:s}){if(t.selectQuiz&&e.selectQuiz)this.map.closePopup(),this.polyline&&(this.map.removeLayer(this.polyline),this.polyline=null),this.set({quizList:this.quizList});else if(t.layerID&&e.layerID)this.setLayerGame(e.layerID);else if(t.question&&e.question){let{layerGame:t}=this.get();this.map.closePopup(),this.polyline&&(this.map.removeLayer(this.polyline),this.polyline=null),this.map.setZoom(t._gameZoom)}else t.sectionsList&&e.sectionsList&&this.reBuildQuestions(e.sectionsList)}function b(n){var a,c;g(this,n),this._state=e({layerGame:null,quizList:null,questions:null,permalink:null,map:null},n.data),this._intro=!!n.intro,this._handlers.state=[q],q.call(this,{changed:s({},this._state),current:this._state}),this._fragment=(this._state,{c(){(a=l("div")).id="map"},m(t,e){o(t,a,e),c=!0},p:t,i(t,e){c||this.m(t,e)},o:i,d(t){t&&r(a)}}),this.root._oncreate.push(()=>{(function(){let{urlParams:t}=this.get();this.createMap(t)}).call(this),this.fire("update",{changed:s({},this._state),current:this._state})}),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor),f(this)),this._intro=!0}e(b.prototype,y),e(b.prototype,_);window.serverBase;var z={checkSection(t,e){let{sectionsList:s}=this.get();s[t]=e,this.set({sectionsList:s})},start(){this.nextQuestion(0,!0)},nextQuestion(t,e){let{questions:s,props:i,score:n,currentScore:o}=this.get(),r=s.shift();if(this.sc=this.sc||0,this.sc+=t||0,!r){n=n||{};let t=i.name,e=n[t]||[];e.push(this.sc);let s=e.length;n[t]=e.slice(s-5,s),window.localStorage.setItem("_gameQuiz_",JSON.stringify(n))}e&&(o=[]),this.set({questions:s,question:r,resultQuestion:!1,currentScore:o})}};function x({changed:t,current:e,previous:s}){if(t.resultQuestion&&e.resultQuestion){let{currentScore:t}=this.get();t.push(e.resultQuestion),this.set({currentScore:t})}}function Q(t,e){var s,i,n,a={},l={urlParams:e.urlParams};void 0!==e.selectQuiz&&(l.selectQuiz=e.selectQuiz,a.selectQuiz=!0),void 0!==e.sectionsList&&(l.sectionsList=e.sectionsList,a.sectionsList=!0),void 0!==e.quizList&&(l.quizList=e.quizList,a.quizList=!0),void 0!==e.layerID&&(l.layerID=e.layerID,a.layerID=!0),void 0!==e.layerGame&&(l.layerGame=e.layerGame,a.layerGame=!0),void 0!==e.score&&(l.score=e.score,a.score=!0),void 0!==e.questions&&(l.questions=e.questions,a.questions=!0),void 0!==e.question&&(l.question=e.question,a.question=!0),void 0!==e.resultQuestion&&(l.resultQuestion=e.resultQuestion,a.resultQuestion=!0);var u=new b({root:t.root,store:t.store,data:l,_bind(e,s){var i={};!a.selectQuiz&&e.selectQuiz&&(i.selectQuiz=s.selectQuiz),!a.sectionsList&&e.sectionsList&&(i.sectionsList=s.sectionsList),!a.quizList&&e.quizList&&(i.quizList=s.quizList),!a.layerID&&e.layerID&&(i.layerID=s.layerID),!a.layerGame&&e.layerGame&&(i.layerGame=s.layerGame),!a.score&&e.score&&(i.score=s.score),!a.questions&&e.questions&&(i.questions=s.questions),!a.question&&e.question&&(i.question=s.question),!a.resultQuestion&&e.resultQuestion&&(i.resultQuestion=s.resultQuestion),t._set(i),a={}}});function h(t){return t.question?j:B}t.root._beforecreate.push(()=>{u._bind({selectQuiz:1,sectionsList:1,quizList:1,layerID:1,layerGame:1,score:1,questions:1,question:1,resultQuestion:1},u.get())});var p=h(e),m=p(t,e);return{c(){u._fragment.c(),s=c("\r\n"),m.c(),i=document.createComment("")},m(t,e){u._mount(t,e),o(t,s,e),m.m(t,e),o(t,i,e),n=!0},p(s,n){e=n;var o={};s.urlParams&&(o.urlParams=e.urlParams),!a.selectQuiz&&s.selectQuiz&&(o.selectQuiz=e.selectQuiz,a.selectQuiz=void 0!==e.selectQuiz),!a.sectionsList&&s.sectionsList&&(o.sectionsList=e.sectionsList,a.sectionsList=void 0!==e.sectionsList),!a.quizList&&s.quizList&&(o.quizList=e.quizList,a.quizList=void 0!==e.quizList),!a.layerID&&s.layerID&&(o.layerID=e.layerID,a.layerID=void 0!==e.layerID),!a.layerGame&&s.layerGame&&(o.layerGame=e.layerGame,a.layerGame=void 0!==e.layerGame),!a.score&&s.score&&(o.score=e.score,a.score=void 0!==e.score),!a.questions&&s.questions&&(o.questions=e.questions,a.questions=void 0!==e.questions),!a.question&&s.question&&(o.question=e.question,a.question=void 0!==e.question),!a.resultQuestion&&s.resultQuestion&&(o.resultQuestion=e.resultQuestion,a.resultQuestion=void 0!==e.resultQuestion),u._set(o),a={},p===(p=h(e))&&m?m.p(s,e):(m.d(1),(m=p(t,e)).c(),m.m(i.parentNode,i))},i(t,e){n||this.m(t,e)},o(t){n&&(u&&u._fragment.o(t),n=!1)},d(t){u.destroy(t),t&&r(s),m.d(t),t&&r(i)}}}function S(t,e){var s,i,a,u,h,p=e.it.question.properties[1],d=e.it.strLen;return{c(){s=l("li"),i=c(p),a=c(": "),u=l("b"),h=c(d),s.className="svelte-1vmgig5"},m(t,e){o(t,s,e),n(s,i),n(s,a),n(s,u),n(u,h)},p(t,e){t.currentScore&&p!==(p=e.it.question.properties[1])&&m(i,p),t.currentScore&&d!==(d=e.it.strLen)&&m(h,d)},d(t){t&&r(s)}}}function k(t,e){for(var s,i,p,d,f,g,v,y,_,L,q,b,z,x,Q=e.currentScore,k=[],I=0;I<Q.length;I+=1)k[I]=S(0,H(e,Q,I));function D(e){t.nextQuestion()}function G(e){t.set({question:!1})}return{c(){s=l("hr"),i=c("\r\n\t\t\t"),p=l("div"),d=l("ul");for(var t=0;t<k.length;t+=1)k[t].c();f=c("\r\n\t\t\t\t"),g=l("hr"),v=c("\r\n\t\t\t\tОбщий результат: "),y=c(e.currentItog),_=c("\r\n\t\t\t"),L=l("br"),q=c("\r\n\t\t\t"),(b=l("button")).textContent="Продолжить",z=c("\r\n\t\t\t"),(x=l("button")).textContent="Выбрать игру",p.className="question-result svelte-1vmgig5",u(b,"click",D),b.className="start",u(x,"click",G),x.className="start"},m(t,e){o(t,s,e),o(t,i,e),o(t,p,e),n(p,d);for(var r=0;r<k.length;r+=1)k[r].m(d,null);n(p,f),n(p,g),n(p,v),n(p,y),o(t,_,e),o(t,L,e),o(t,q,e),o(t,b,e),o(t,z,e),o(t,x,e)},p(t,e){if(t.currentScore){Q=e.currentScore;for(var s=0;s<Q.length;s+=1){const i=H(e,Q,s);k[s]?k[s].p(t,i):(k[s]=S(0,i),k[s].c(),k[s].m(d,null))}for(;s<k.length;s+=1)k[s].d(1);k.length=Q.length}t.currentItog&&m(y,e.currentItog)},d(t){t&&(r(s),r(i),r(p)),a(k,t),t&&(r(_),r(L),r(q),r(b)),h(b,"click",D),t&&(r(z),r(x)),h(x,"click",G)}}}function I(t,e){var s,i,a=e.it.title;return{c(){s=l("li"),i=c(a),s._svelte={component:t,ctx:e},u(s,"click",A)},m(t,e){o(t,s,e),n(s,i)},p(t,n){e=n,t.quizList&&a!==(a=e.it.title)&&m(i,a),s._svelte.ctx=e},d(t){t&&r(s),h(s,"click",A)}}}function D(t,e){var s,i,a,d=e.it;return{c(){s=l("li"),i=l("input"),a=c(d),i._svelte={component:t,ctx:e},u(i,"change",Z),p(i,"type","checkbox"),i.checked=!0},m(t,e){o(t,s,e),n(s,i),n(s,a)},p(t,s){e=s,i._svelte.ctx=e,(t.Object||t.sectionsList)&&d!==(d=e.it)&&m(a,d)},d(t){t&&r(s),h(i,"change",Z)}}}function G(t,e){for(var s,i,n,u=e.Object.keys(e.sectionsList),h=[],p=0;p<u.length;p+=1)h[p]=D(t,J(e,u,p));return{c(){(s=l("h1")).textContent="Рубрики",i=c("\r\n\t\t\t\t"),n=l("ul");for(var t=0;t<h.length;t+=1)h[t].c();s.className="section",n.className="selectSectionsList svelte-1vmgig5"},m(t,e){o(t,s,e),o(t,i,e),o(t,n,e);for(var r=0;r<h.length;r+=1)h[r].m(n,null)},p(e,s){if(e.Object||e.sectionsList){u=s.Object.keys(s.sectionsList);for(var i=0;i<u.length;i+=1){const o=J(s,u,i);h[i]?h[i].p(e,o):(h[i]=D(t,o),h[i].c(),h[i].m(n,null))}for(;i<h.length;i+=1)h[i].d(1);h.length=u.length}},d(t){t&&(r(s),r(i),r(n)),a(h,t)}}}function N(t,e){var s;function i(e){t.set({selectQuiz:!0})}return{c(){(s=l("button")).textContent="Выбрать другую игру",u(s,"click",i),s.className="start svelte-1vmgig5"},m(t,e){o(t,s,e)},d(t){t&&r(s),h(s,"click",i)}}}function M(t,e){var s,i,a;return{c(){s=l("div"),(i=l("iframe")).title="video",i.width="100%",i.height="315",i.src=a=e.props.MetaProperties.video.Value,p(i,"frameborder","0"),p(i,"allow","autoplay; encrypted-media"),i.allowFullscreen=!0},m(t,e){o(t,s,e),n(s,i)},p(t,e){t.props&&a!==(a=e.props.MetaProperties.video.Value)&&(i.src=a)},d(t){t&&r(s)}}}function P(t,e){var s,i,a,u=e.it;return{c(){s=l("li"),i=c(u),a=c(" баллов")},m(t,e){o(t,s,e),n(s,i),n(s,a)},p(t,e){(t.score||t.props)&&u!==(u=e.it)&&m(i,u)},d(t){t&&r(s)}}}function w(t,e){for(var s,i=e.score[e.props.name],n=[],c=0;c<i.length;c+=1)n[c]=P(0,V(e,i,c));return{c(){s=l("ul");for(var t=0;t<n.length;t+=1)n[t].c()},m(t,e){o(t,s,e);for(var i=0;i<n.length;i+=1)n[i].m(s,null)},p(t,e){if(t.score||t.props){i=e.score[e.props.name];for(var o=0;o<i.length;o+=1){const r=V(e,i,o);n[o]?n[o].p(t,r):(n[o]=P(0,r),n[o].c(),n[o].m(s,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d(t){t&&r(s),a(n,t)}}}function E(t,e){for(var s,i,n,u=e.quizList,h=[],p=0;p<u.length;p+=1)h[p]=I(t,T(e,u,p));return{c(){(s=l("h1")).textContent="Выбрать игру",i=c("\r\n\t\t"),n=l("ul");for(var t=0;t<h.length;t+=1)h[t].c();s.className="title svelte-1vmgig5",n.className="selectQuiz svelte-1vmgig5"},m(t,e){o(t,s,e),o(t,i,e),o(t,n,e);for(var r=0;r<h.length;r+=1)h[r].m(n,null)},p(e,s){if(e.quizList){u=s.quizList;for(var i=0;i<u.length;i+=1){const o=T(s,u,i);h[i]?h[i].p(e,o):(h[i]=I(t,o),h[i].c(),h[i].m(n,null))}for(;i<h.length;i+=1)h[i].d(1);h.length=u.length}},d(t){t&&(r(s),r(i),r(n)),a(h,t)}}}function O(e,s){var i;return{c(){(i=l("div")).innerHTML='<div class="svelte-1vmgig5"></div><div class="svelte-1vmgig5"></div><div class="svelte-1vmgig5"></div><div class="svelte-1vmgig5"></div>',i.className="lds-ellipsis svelte-1vmgig5"},m(t,e){o(t,i,e)},p:t,d(t){t&&r(i)}}}function C(t,e){var s,i,a,p,d,f,g,v,y,_,L,q,b=e.props.description;function z(e){t.start()}var x=e.sectionsList&&G(t,e);function Q(e){t.start()}var S=!e.sectionsList&&N(t),k=e.props.MetaProperties.video&&e.props.MetaProperties.video.Value&&M(0,e),I=e.score[e.props.name]&&w(0,e);return{c(){s=l("div"),(i=l("button")).textContent="Начать игру заново",a=c("\r\n\t\t"),p=l("div"),d=l("p"),f=c(b),g=c("\r\n\t\t\t"),x&&x.c(),v=c("\r\n\t\t\t"),(y=l("button")).textContent="Начать игру",_=c("\r\n\t\t\t"),S&&S.c(),L=c("\r\n\t\t\t"),k&&k.c(),q=c("\r\n\t\t\t"),I&&I.c(),u(i,"click",z),i.className="start svelte-1vmgig5",i.disabled=e.isSectionsEmpty,s.className="title svelte-1vmgig5",d.className="description",u(y,"click",Q),y.className="start svelte-1vmgig5",y.disabled=e.isSectionsEmpty,p.className="content svelte-1vmgig5"},m(t,e){o(t,s,e),n(s,i),o(t,a,e),o(t,p,e),n(p,d),n(d,f),n(p,g),x&&x.m(p,null),n(p,v),n(p,y),n(p,_),S&&S.m(p,null),n(p,L),k&&k.m(p,null),n(p,q),I&&I.m(p,null)},p(e,s){e.isSectionsEmpty&&(i.disabled=s.isSectionsEmpty),e.props&&b!==(b=s.props.description)&&m(f,b),s.sectionsList?x?x.p(e,s):((x=G(t,s)).c(),x.m(p,v)):x&&(x.d(1),x=null),e.isSectionsEmpty&&(y.disabled=s.isSectionsEmpty),s.sectionsList?S&&(S.d(1),S=null):S||((S=N(t)).c(),S.m(p,L)),s.props.MetaProperties.video&&s.props.MetaProperties.video.Value?k?k.p(e,s):((k=M(0,s)).c(),k.m(p,q)):k&&(k.d(1),k=null),s.score[s.props.name]?I?I.p(e,s):((I=w(0,s)).c(),I.m(p,null)):I&&(I.d(1),I=null)},d(t){t&&r(s),h(i,"click",z),t&&(r(a),r(p)),x&&x.d(),h(y,"click",Q),S&&S.d(),k&&k.d(),I&&I.d()}}}function j(t,e){var s,i,a,u=e.question?e.question.properties[1]:"",h=e.resultQuestion&&k(t,e);return{c(){s=l("div"),i=c(u),a=c("\r\n\t\t"),h&&h.c(),s.className="question svelte-1vmgig5"},m(t,e){o(t,s,e),n(s,i),n(s,a),h&&h.m(s,null)},p(e,n){e.question&&u!==(u=n.question?n.question.properties[1]:"")&&m(i,u),n.resultQuestion?h?h.p(e,n):((h=k(t,n)).c(),h.m(s,null)):h&&(h.d(1),h=null)},d(t){t&&r(s),h&&h.d()}}}function B(t,e){var s,i,n;function a(t){return t.quizList?E:t.layerGame?C:O}var u=a(e),h=u(t,e);return{c(){s=l("div"),i=c("\r\n\t"),n=l("div"),h.c(),s.className="scrim svelte-1vmgig5",n.className="controls svelte-1vmgig5"},m(t,e){o(t,s,e),o(t,i,e),o(t,n,e),h.m(n,null)},p(e,s){u===(u=a(s))&&h?h.p(e,s):(h.d(1),(h=u(t,s)).c(),h.m(n,null))},d(t){t&&(r(s),r(i),r(n)),h.d()}}}function H(t,e,s){const i=Object.create(t);return i.it=e[s],i.each_value=e,i.it_index=s,i}function T(t,e,s){const i=Object.create(t);return i.it=e[s],i.each_value_1=e,i.it_index_1=s,i}function A(t){const{component:e,ctx:s}=this._svelte;e.set({layerID:s.it.layerID,selectQuiz:!1,quizList:!1})}function J(t,e,s){const i=Object.create(t);return i.it=e[s],i.each_value_2=e,i.it_index_2=s,i}function Z(t){const{component:e,ctx:s}=this._svelte;e.checkSection(s.it,this.checked)}function V(t,e,s){const i=Object.create(t);return i.it=e[s],i.each_value_3=e,i.it_index_3=s,i}function U(t){g(this,t),this._state=e(e({Object:Object},{urlParams:{},quizList:null,selectQuiz:null,props:{},currentScore:[],score:null}),t.data),this._recompute({layerGame:1,currentScore:1,sectionsList:1},this._state),this._intro=!!t.intro,this._handlers.state=[x],x.call(this,{changed:s({},this._state),current:this._state}),this._fragment=Q(this,this._state),this.root._oncreate.push(()=>{this.fire("update",{changed:s({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),f(this)),this._intro=!0}e(U.prototype,y),e(U.prototype,z),U.prototype._recompute=function(t,e){t.layerGame&&this._differs(e.props,e.props=function({layerGame:t}){return t?t.getGmxProperties():{}}(e))&&(t.props=!0),t.currentScore&&this._differs(e.currentItog,e.currentItog=function({currentScore:t}){return L.gmxUtil.prettifyDistance(t.reduce((t,e)=>t+e.len,0))}(e))&&(t.currentItog=!0),t.sectionsList&&this._differs(e.isSectionsEmpty,e.isSectionsEmpty=function({sectionsList:t}){let e=!1;if(t){e=!0;for(let s in t)if(t[s]){e=!1;break}}return e}(e))&&(t.isSectionsEmpty=!0)};let R=(()=>{let t={};return location.search.substr(1).split("&").forEach(e=>{let s=e.split("=");t[s[0]]=s[1]}),t})();return new U({target:document.body,data:{urlParams:R,name:"world"}})}();
//# sourceMappingURL=bundle.js.map
